# ~/.tmux.conf
# A beginner-friendly, well-commented tmux configuration.

# =============================================================================
# 1. CORE SETTINGS
# =============================================================================

# Set the prefix key to C-a (Ctrl+a) instead of the default C-b.
# This is more ergonomic as 'a' is on the home row.
set-option -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

# Set a longer history limit for scrollback buffer.
set-option -g history-limit 5000

# Start window and pane numbering at 1 instead of 0. It's more intuitive.
set-option -g base-index 1
set-window-option -g pane-base-index 1

# Enable mouse support for scrolling, selecting panes, and resizing.
set-option -g mouse on

# =============================================================================
# 2. COLOR SETTINGS
# =============================================================================
# This section is CRITICAL for making Neovim themes look correct inside tmux.
# It tells tmux to expect and handle 24-bit true color.

# Set the default terminal to a 256-color one.
set-option -g default-terminal "screen-256color"

# Add true color support.
set-option -sa terminal-overrides ",xterm*:Tc"

# =============================================================================
# 3. KEYBINDINGS
# =============================================================================
# These are custom shortcuts to make using tmux faster.
# The prefix key (C-a) must be pressed before these.

# Reload the tmux config file with 'r'. No need to kill and restart the server.
bind r source-file ~/.tmux.conf \; display-message "Tmux config reloaded!"

# Split panes using | for a vertical split and - for a horizontal split.
# This is more intuitive than the defaults (% and ").
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Unbind default split keys.
unbind '"'
unbind %

# Navigate between panes using Vim keys (h, j, k, l) without the prefix.
# This requires holding Alt (or Option on macOS).
# In iTerm2, you need to set "Option key acts as: Esc+" in Profiles > Keys.
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Resize panes using Vim keys with Ctrl + arrow keys
bind -r C-k resize-pane -U 5
bind -r C-j resize-pane -D 5
bind -r C-h resize-pane -L 5
bind -r C-l resize-pane -R 5

# =============================================================================
# 4. VIM-LIKE COPY MODE & CLIPBOARD INTEGRATION
# =============================================================================
# This section enables using Vim keys in copy mode and integrates with the
# system clipboard on macOS.

# Set vi mode for copy mode
set-window-option -g mode-keys vi

# Bind 'v' to begin selection in copy mode (like Vim's visual mode)
bind-key -T copy-mode-vi v send-keys -X begin-selection

# Bind 'y' to yank (copy) the selection to the system clipboard
# This uses 'pbcopy', a macOS-specific command.
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# Bind 'C-v' to toggle rectangle selection (block selection)
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle

# =============================================================================
# 5. STATUS BAR
# =============================================================================
# A simple, clean status bar configuration.

# Position the status bar at the top.
# set-option -g status-position top

# Set colors for the status bar
set-option -g status-style "fg=white,bg=black"

# Left side of the status bar: shows the session name.
set-option -g status-left "#[fg=green]S: #S #[fg=white]"
set-option -g status-left-length 20

# Right side of the status bar: shows date and time.
set-option -g status-right "#[fg=cyan]%Y-%m-%d %H:%M #[fg=white]"

# Center the window list.
set-option -g status-justify centre

# Style for the active window in the status bar.
set-window-option -g window-status-current-style "fg=black,bg=green"
set-window-option -g window-status-current-format " #I:#W#F "

# Style for inactive windows.
set-window-option -g window-status-style "fg=gray,bg=black"
set-window-option -g window-status-format " #I:#W#F "

